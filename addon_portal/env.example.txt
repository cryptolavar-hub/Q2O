# ========================================================================
# Q2O Licensing System - Environment Configuration
# ========================================================================
# INSTRUCTIONS:
# 1. Copy this file to the PROJECT ROOT: C:\Q2O_Combined\.env
# 2. Update YOUR_PASSWORD_HERE with your actual PostgreSQL password
# 3. Update other CHANGE_ME values with real secrets
# 
# SECURITY WARNING: Never commit .env to git! It contains secrets.
# 
# NOTE: This is the ONLY .env file for the entire Q2O project.
#       All components (Admin Portal, Tenant Portal, Backend API) read from root .env
# ========================================================================

# ========================================================================
# DATABASE CONFIGURATION
# ========================================================================

# Option 1: SQLite (Development/Testing)
# - Zero setup required
# - Perfect for local development
# - Not recommended for production with multiple users
# DB_DSN=sqlite:///./q2o_licensing.db

# Option 2: PostgreSQL (Production) ⭐ RECOMMENDED
# - Production-grade performance
# - Supports concurrent connections
# - ACID compliance, transactions
# - Install: See POSTGRESQL_SETUP.md
DB_DSN=postgresql+psycopg://q2o_user:YOUR_PASSWORD_HERE@localhost:5432/q2o

# ========================================================================
# APPLICATION SETTINGS
# ========================================================================

APP_NAME=Quick2Odoo
ENV=production

# Enable task tracking in agent_tasks table (true/false)
# When enabled, agents will create and update tasks in the database
# for real-time monitoring in the Tenant Dashboard Status page
ENABLE_TASK_TRACKING=true

# ========================================================================
# JWT AUTHENTICATION
# ========================================================================
# Generate RSA keys:
#   ssh-keygen -t rsa -b 2048 -m PEM -f jwt_key
#   # Private key: jwt_key
#   # Public key: jwt_key.pub

JWT_ISSUER=q2o-auth
JWT_AUDIENCE=q2o-clients
JWT_PRIVATE_KEY=CHANGE_ME_RSA_PRIV_PEM
JWT_PUBLIC_KEY=CHANGE_ME_RSA_PUB_PEM
JWT_ACCESS_TTL_SECONDS=900
JWT_REFRESH_TTL_SECONDS=1209600

# ========================================================================
# STRIPE BILLING
# ========================================================================
# Get keys from: https://dashboard.stripe.com/apikeys

# Test keys (start with sk_test_)
STRIPE_SECRET_KEY=sk_test_REPLACE_WITH_YOUR_ACTUAL_STRIPE_KEY_HERE
STRIPE_WEBHOOK_SECRET=whsec_REPLACE_WITH_YOUR_ACTUAL_WEBHOOK_SECRET_HERE

# Production keys (start with sk_live_) - Uncomment for production
# STRIPE_SECRET_KEY=sk_live_REPLACE_WITH_YOUR_ACTUAL_LIVE_KEY_HERE
# STRIPE_WEBHOOK_SECRET=whsec_REPLACE_WITH_YOUR_ACTUAL_LIVE_WEBHOOK_SECRET_HERE

# ========================================================================
# ACTIVATION CODES
# ========================================================================
# Random string for hashing activation codes
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
ACTIVATION_CODE_PEPPER=CHANGE_ME_TO_RANDOM_64_CHAR_HEX_STRING

# ========================================================================
# CORS CONFIGURATION
# ========================================================================
# Comma-separated list of allowed origins
ALLOWED_ORIGINS=http://localhost:3000,https://quick2odoo.com,https://portal.quick2odoo.com

# ========================================================================
# FRONTEND API CONFIGURATION (Next.js Apps)
# ========================================================================
# API base URL for Next.js proxy rewrites
# This is read by Tenant Portal and Admin Portal Next.js configs
# IMPORTANT: Must point to the Licensing API port (8080), NOT Dashboard API (8000)
# Backend now supports dual-stack (IPv4 + IPv6), so all options work:
# Options:
#   - IPv4: http://127.0.0.1:8080 (explicit IPv4) ⭐ RECOMMENDED
#   - IPv6: http://[::1]:8080 (explicit IPv6)
#   - localhost: http://localhost:8080 (system resolves to IPv4/IPv6 - now works!)
#   - Production: https://api.yourdomain.com
API_BASE_URL=http://127.0.0.1:8080

# ========================================================================
# BRANDING CDN (Optional)
# ========================================================================
# CDN for serving tenant logos and assets
# Leave empty to use local storage
BRANDING_CDN_BASE=

# ========================================================================
# SESSION MANAGEMENT
# ========================================================================
# Random secret for session cookies
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
SESSION_SECRET=CHANGE_ME_TO_RANDOM_64_CHAR_HEX_STRING

# ========================================================================
# OIDC/SSO AUTHENTICATION (Optional)
# ========================================================================
# For admin login via enterprise identity providers (Auth0, Okta, etc.)
# Leave empty to disable SSO

OIDC_ISSUER=
OIDC_CLIENT_ID=
OIDC_CLIENT_SECRET=
OIDC_REDIRECT_URL=http://localhost:8080/auth/callback

# ========================================================================
# LOGGING CONFIGURATION
# ========================================================================
# Enable/disable logging (True/False)
# Logs are stored in logs/ directory as api_YYYY-MM-DD.log
LOG_ENABLED=True

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# ========================================================================
# TO USE THIS FILE:
# ========================================================================
# Windows (from project root: C:\Q2O_Combined):
#   copy addon_portal\env.example.txt .env
#   
# Linux/Mac (from project root):
#   cp addon_portal/env.example.txt .env
#   
# Then edit .env in the ROOT directory and update YOUR_PASSWORD_HERE
# 
# IMPORTANT: The .env file must be in the project root (C:\Q2O_Combined\.env)
#            The backend API must be run from the project root to find it.
# ========================================================================

