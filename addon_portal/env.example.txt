# ========================================================================
# Q2O Licensing System - Environment Configuration
# ========================================================================
# INSTRUCTIONS:
# 1. Copy this file to the PROJECT ROOT: C:\Q2O_Combined\.env
# 2. Update YOUR_PASSWORD_HERE with your actual PostgreSQL password
# 3. Update other CHANGE_ME values with real secrets
# 
# SECURITY WARNING: Never commit .env to git! It contains secrets.
# 
# NOTE: This is the ONLY .env file for the entire Q2O project.
#       All components (Admin Portal, Tenant Portal, Backend API) read from root .env
# ========================================================================

# ========================================================================
# DATABASE CONFIGURATION
# ========================================================================

# Option 1: SQLite (Development/Testing)
# - Zero setup required
# - Perfect for local development
# - Not recommended for production with multiple users
# DB_DSN=sqlite:///./q2o_licensing.db

# Option 2: PostgreSQL (Production) ⭐ RECOMMENDED
# - Production-grade performance
# - Supports concurrent connections
# - ACID compliance, transactions
# - Install: See POSTGRESQL_SETUP.md
DB_DSN=postgresql+psycopg://q2o_user:YOUR_PASSWORD_HERE@localhost:5432/q2o

# ========================================================================
# APPLICATION SETTINGS
# ========================================================================

APP_NAME=Quick2Odoo
ENV=production

# Enable task tracking in agent_tasks table (true/false)
# When enabled, agents will create and update tasks in the database
# for real-time monitoring in the Tenant Dashboard Status page
ENABLE_TASK_TRACKING=true

# ========================================================================
# JWT AUTHENTICATION
# ========================================================================
# Generate RSA keys:
#   ssh-keygen -t rsa -b 2048 -m PEM -f jwt_key
#   # Private key: jwt_key
#   # Public key: jwt_key.pub

JWT_ISSUER=q2o-auth
JWT_AUDIENCE=q2o-clients
JWT_PRIVATE_KEY=CHANGE_ME_RSA_PRIV_PEM
JWT_PUBLIC_KEY=CHANGE_ME_RSA_PUB_PEM
JWT_ACCESS_TTL_SECONDS=900
JWT_REFRESH_TTL_SECONDS=1209600

# ========================================================================
# STRIPE BILLING
# ========================================================================
# Get keys from: https://dashboard.stripe.com/apikeys

# Test keys (start with sk_test_)
STRIPE_SECRET_KEY=sk_test_REPLACE_WITH_YOUR_ACTUAL_STRIPE_KEY_HERE
STRIPE_WEBHOOK_SECRET=whsec_REPLACE_WITH_YOUR_ACTUAL_WEBHOOK_SECRET_HERE

# Production keys (start with sk_live_) - Uncomment for production
# STRIPE_SECRET_KEY=sk_live_REPLACE_WITH_YOUR_ACTUAL_LIVE_KEY_HERE
# STRIPE_WEBHOOK_SECRET=whsec_REPLACE_WITH_YOUR_ACTUAL_LIVE_WEBHOOK_SECRET_HERE

# ========================================================================
# ACTIVATION CODES
# ========================================================================
# Random string for hashing activation codes
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
ACTIVATION_CODE_PEPPER=CHANGE_ME_TO_RANDOM_64_CHAR_HEX_STRING

# ========================================================================
# CORS CONFIGURATION
# ========================================================================
# Comma-separated list of allowed origins
ALLOWED_ORIGINS=http://localhost:3000,https://quick2odoo.com,https://portal.quick2odoo.com

# ========================================================================
# FRONTEND API CONFIGURATION (Next.js Apps)
# ========================================================================
# API base URL for Next.js proxy rewrites
# This is read by Tenant Portal and Admin Portal Next.js configs
# IMPORTANT: Must point to the Licensing API port (8080), NOT Dashboard API (8000)
# Options:
#   - IPv4: http://127.0.0.1:8080 (explicit IPv4) ⭐ RECOMMENDED
#   - IPv6: http://[::1]:8080 (explicit IPv6 - requires ENABLE_DUAL_STACK=true)
#   - localhost: http://localhost:8080 (system resolves to IPv4/IPv6)
#   - Production: https://api.yourdomain.com
API_BASE_URL=http://127.0.0.1:8080

# ========================================================================
# BACKEND API DUAL-STACK CONFIGURATION
# ========================================================================
# Enable dual-stack mode (IPv4 + IPv6) for the Licensing API
# When enabled, the API listens on both:
#   - IPv4: 0.0.0.0:8080
#   - IPv6: [::]:8080
# Default: false (IPv4 only for compatibility)
# Set to true to enable both IPv4 and IPv6 support
ENABLE_DUAL_STACK=false

# ========================================================================
# BRANDING CDN (Optional)
# ========================================================================
# CDN for serving tenant logos and assets
# Leave empty to use local storage
BRANDING_CDN_BASE=

# ========================================================================
# SESSION MANAGEMENT
# ========================================================================
# Random secret for session cookies
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
SESSION_SECRET=CHANGE_ME_TO_RANDOM_64_CHAR_HEX_STRING

# ========================================================================
# OIDC/SSO AUTHENTICATION (Optional)
# ========================================================================
# For admin login via enterprise identity providers (Auth0, Okta, etc.)
# Leave empty to disable SSO

OIDC_ISSUER=
OIDC_CLIENT_ID=
OIDC_CLIENT_SECRET=
OIDC_REDIRECT_URL=http://localhost:8080/auth/callback

# ========================================================================
# LOGGING CONFIGURATION
# ========================================================================
# Enable/disable logging (True/False)
# Logs are stored in logs/ directory as api_YYYY-MM-DD.log
LOG_ENABLED=True

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# ========================================================================
# TIMEZONE CONFIGURATION
# ========================================================================
# Server timezone for date calculations in dashboards and analytics
# Format: "UTC", "UTC-5", "UTC+3", "America/New_York", "Europe/London", etc.
# Default: UTC (no offset)
TIME_ZONE=UTC

# ========================================================================
# SMTP CONFIGURATION (Email OTP Delivery)
# ========================================================================
# Enable email OTP delivery (True/False)
SMTP_ENABLED=False

# SMTP server settings
SMTP_HOST=
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=
SMTP_FROM_NAME=Q2O Platform
SMTP_USE_TLS=True

# ========================================================================
# SMS CONFIGURATION (SMS/WhatsApp OTP Delivery - Optional)
# ========================================================================
# Enable SMS OTP delivery (True/False)
SMS_ENABLED=False

# SMS provider settings (e.g., 'twilio', 'aws_sns')
SMS_PROVIDER=
SMS_API_KEY=
SMS_API_SECRET=
SMS_FROM_NUMBER=

# ========================================================================
# LLM API KEYS (For Agent Code Generation)
# ========================================================================
# Get API keys from respective provider dashboards
# At least one key is required for agents to generate code

# Google Gemini API (Primary - Recommended - Cheapest)
# Get from: https://makersuite.google.com/app/apikey
GOOGLE_API_KEY=

# OpenAI API (Fallback - Premium Quality)
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=

# Anthropic Claude API (Tertiary - Alternative)
# Get from: https://console.anthropic.com/account/keys
ANTHROPIC_API_KEY=

# LLM System Prompt (Managed via LLM Management service, synced to .env)
LLM_SYSTEM_PROMPT=

# ========================================================================
# LLM CONFIGURATION (Agent Code Generation Settings)
# ========================================================================
# Enable LLM integration for agents (true/false)
Q2O_USE_LLM=true

# Primary LLM provider: gemini, openai, or anthropic
Q2O_LLM_PRIMARY=gemini

# Monthly budget for LLM API calls (in USD)
Q2O_LLM_MONTHLY_BUDGET=1000.0

# LLM caching configuration
Q2O_LLM_CACHE_ENABLED=true
Q2O_LLM_CACHE_DIR=.llm_cache
Q2O_LLM_CACHE_TTL_DAYS=90

# Model selection per provider
# Available Gemini models (as of Nov 2025): gemini-2.5-flash, gemini-2.0-flash, gemini-2.5-pro, gemini-3-pro, gemini-2.5-flash-lite
GEMINI_MODEL=gemini-2.5-flash
OPENAI_MODEL=gpt-4-turbo
ANTHROPIC_MODEL=claude-3-5-sonnet-20241022

# Code generation temperature (0.0 = deterministic, 1.0 = creative)
Q2O_LLM_CODE_TEMPERATURE=0.3

# ========================================================================
# PROJECT EXECUTION CONFIGURATION
# ========================================================================
# Maximum hours a project can run before being marked as failed
# Default: 24 hours
PROJECT_EXECUTION_TIMEOUT_HOURS=24

# ========================================================================
# TO USE THIS FILE:
# ========================================================================
# Windows (from project root: C:\Q2O_Combined):
#   copy addon_portal\env.example.txt .env
#   
# Linux/Mac (from project root):
#   cp addon_portal/env.example.txt .env
#   
# Then edit .env in the ROOT directory and update YOUR_PASSWORD_HERE
# 
# IMPORTANT: The .env file must be in the project root (C:\Q2O_Combined\.env)
#            The backend API must be run from the project root to find it.
# ========================================================================

